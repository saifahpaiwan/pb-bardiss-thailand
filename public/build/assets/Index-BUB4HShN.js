import{l as u,T as C,o as i,f as d,a,u as t,w as o,F as D,Z as B,b as s,t as r,j as h,d as m,e as N,i as $,q as O,g as T,n as U}from"./app-CkCTHuVw.js";import{_ as L}from"./AuthenticatedLayout-CkNAQ8BR.js";import{_ as j,s as b,S as p}from"./PageTitleBox-BAV6fs-R.js";import{s as A,a as c}from"./column.esm-B27wkH0a.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"row"},F={class:"col-lg-12"},M={class:"card"},Y={class:"card-body"},q={class:"row mb-1"},J={class:"col-md-6 responsive-mobile-title"},z=s("h4",{class:"header-title"}," จัดการผู้ใช้งานระบบ (Users) ",-1),H={class:"sub-header"},I={class:"col-md-6 text-right responsive-mobile-btn"},R=s("i",{class:"fe-plus-square"},null,-1),Z=s("span",null,"เพิ่มข้อมูล",-1),G={class:"row"},K={class:"col-md-5 form-group"},Q={class:"col-md-2 form-group"},W={key:0,class:"flex align-items-center"},X={key:1},P={class:"col-md-2 form-group"},ee={key:0,class:"flex align-items-center"},se={key:1},te={class:"col-md-3 form-group text-right"},ae=s("button",{class:"btn btn-dark waves-effect waves-light",type:"summit"},[s("i",{class:"fe-search"}),m(" ค้นหา")],-1),oe=s("i",{class:"fe-rotate-cw"},null,-1),le={class:"table-responsive"},ie=["src","alt"],de=["src","alt"],ne={class:"badge bg-dark p-1 mb-1"},re={key:0,class:"badge badge-success p-1"},ce={key:1,class:"badge badge-secondary p-1"},ue={class:"text-right"},_e=["onClick","disabled"],we={__name:"Index",props:{users:{type:Array},roles:{type:Array}},setup(v){const g=u([{message:"รายการข้อมูลผู้ใช้งาน"}]),w=new Date().toDateString(),f=v;function y(_){p.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(n=>{n.isConfirmed&&l.delete(route("users.destroy",_),{onFinish:()=>{p.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success",showConfirmButton:!1,timer:1500}).then(e=>{location.reload()})}})})}const l=C({keyword:u(),roles_id:u(),status:u()}),k=f.roles,x=Object.values(JSON.parse(JSON.stringify(f.users))),S=u([{id:"-1",name:"Disable"},{id:"1",name:"Enable"}]),V=()=>{l.get(route("users.index"))};return u(),(_,n)=>(i(),d(D,null,[a(t(B),{title:"Users List"}),a(L,null,{default:o(()=>[a(j,{titlemain:"แดชบอร์ด",subtitles:g.value},null,8,["subtitles"]),s("div",E,[s("div",F,[s("div",M,[s("div",Y,[s("div",q,[s("div",J,[z,s("p",H," ข้อมูลประจำวันที่ : "+r(t(w)),1)]),s("div",I,[a(t(h),{href:_.route("users.create"),class:"btn btn-primary waves-effect waves-light float-right mb-2"},{default:o(()=>[R,m(),Z]),_:1},8,["href"])])]),s("form",{onSubmit:N(V,["prevent"])},[s("div",G,[s("div",K,[$(s("input",{type:"search",class:"form-control","onUpdate:modelValue":n[0]||(n[0]=e=>t(l).keyword=e),placeholder:"ค้นหาข้อมูลเพิ่มเติม"},null,512),[[O,t(l).keyword]])]),s("div",Q,[a(t(b),{modelValue:t(l).roles_id,"onUpdate:modelValue":n[1]||(n[1]=e=>t(l).roles_id=e),options:t(k),filter:"",optionLabel:"name",placeholder:"Select a Roles",class:"w-100"},{value:o(e=>[e.value?(i(),d("div",W,[s("div",null,r(e.value.name),1)])):(i(),d("span",X,r(e.placeholder),1))]),_:1},8,["modelValue","options"])]),s("div",P,[a(t(b),{modelValue:t(l).status,"onUpdate:modelValue":n[2]||(n[2]=e=>t(l).status=e),options:S.value,filter:"",optionLabel:"name",placeholder:"Select a Status",class:"w-100"},{value:o(e=>[e.value?(i(),d("div",ee,[s("div",null,r(e.value.name),1)])):(i(),d("span",se,r(e.placeholder),1))]),_:1},8,["modelValue","options"])]),s("div",te,[ae,a(t(h),{href:_.route("users.index"),class:"btn btn-dark waves-effect waves-light"},{default:o(()=>[oe,m(" รีเฟรช ")]),_:1},8,["href"])])])],32),s("div",le,[a(t(A),{value:t(x),paginator:"",rows:5,rowsPerPageOptions:[5,10,20,50],sortMode:"multiple",tableStyle:"width: 100%"},{default:o(()=>[a(t(c),{field:"image",header:"รูป"},{body:o(e=>[e.data.image==null?(i(),d("img",{key:0,src:"/favicon.ico",alt:e.data.image,class:"rounded-circle",height:"50",width:"50"},null,8,ie)):(i(),d("img",{key:1,src:`storage/images/users/${e.data.image}`,alt:e.data.image,class:"rounded-circle",height:"50",width:"50"},null,8,de))]),_:1}),a(t(c),{sortable:"",field:"empolyee_code",header:"รหัสพนักงาน"}),a(t(c),{sortable:"",field:"username",header:"ชื่อ-นามสกุล"},{body:o(e=>[m(r(e.data.username),1)]),_:1}),a(t(c),{field:"role_name",header:"สิทธิ์ผู้ใช้งาน"},{body:o(e=>[s("span",ne,r(e.data.role_name),1)]),_:1}),a(t(c),{sortable:"",field:"status",header:"สถานะ"},{body:o(e=>[e.data.status==1?(i(),d("span",re,"Enable")):e.data.status==0?(i(),d("span",ce,"Disabled")):T("",!0)]),_:1}),a(t(c),{sortable:"",field:"updated_at",header:"เมื่อ"},{body:o(e=>[s("div",null,r(new Date().toLocaleString("th-TH",e.data.updated_at)),1)]),_:1}),a(t(c),{header:"#"},{body:o(e=>[s("div",ue,[a(t(h),{href:_.route("users.edit",e.data.id),class:"btn btn-dark waves-effect waves-light"},{default:o(()=>[m(" แก้ไข ")]),_:2},1032,["href"]),s("button",{type:"button",class:U(["btn btn-danger waves-effect waves-light ml-1",{"opacity-25":t(l).processing}]),onClick:he=>y(e.data.id),disabled:t(l).processing}," ลบข้อมูล ",10,_e)])]),_:1})]),_:1},8,["value"])])])])])])]),_:1})],64))}};export{we as default};
